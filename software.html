<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Relatify - Software</title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+Bhai+2&display=swap" rel="stylesheet">
<style>
body { font-family: 'Baloo Bhai 2', Comic Sans MS, sans-serif; background:#121212; color:#fff; text-align:center; margin:0; padding:0; overflow-x:hidden; }
header { background:#1A237E; padding:20px; font-size:2rem; font-weight:bold; color:#fff; position: sticky; top: 0; z-index: 1001; display:flex; justify-content: space-between; align-items:center; }
.menu-btn { font-size: 2rem; cursor: pointer; z-index:1002; }

.category-menu {
    position: fixed;
    top: 0;
    left: -250px;
    width: 250px;
    height: 100%;
    background: #1E1E1E;
    flex-direction: column;
    padding: 60px 10px 10px 10px;
    box-shadow: 2px 0 8px rgba(0,0,0,0.5);
    transition: left 0.3s ease;
    z-index: 1000;
}
.category-menu button {
    background:#1E1E1E; color:#fff; border:none; padding:10px 12px; margin:6px 0; border-radius:10px; cursor:pointer; font-size:1rem; text-align:left;
}
.category-menu button:hover { background:#00BFA5; color:#fff; }

/* Overlay for menu */
.menu-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width:100%;
    height:100%;
    background: rgba(0,0,0,0.5);
    opacity:0;
    visibility:hidden;
    transition: opacity 0.3s;
    z-index: 999;
}

/* Sticky search */
.search-box {
    position: sticky;
    top: 60px;
    z-index: 998;
    width: 100%;
    display: flex;
    justify-content: center;
    background: #121212;
    padding: 8px 0;
}
.search-box input { padding: 10px 12px; border-radius: 10px; border: none; width:90%; max-width:320px; font-size:1rem; background:#fff; color:#000; box-shadow:0 2px 5px rgba(0,0,0,0.3); }
.search-box input::placeholder { color:#888; }

/* Grid */
.grid-container { width:100%; max-width:1000px; margin-top:15px; position:relative; }
.grid { display: grid; grid-template-columns: repeat(3, 1fr); gap:20px; justify-items:center; }
@media(max-width:900px){ .grid { grid-template-columns: repeat(2,1fr); gap:15px; } }
@media(max-width:600px){ .grid { grid-template-columns: 1fr; gap:12px; } }

/* Product cards */
.card { background:#1E1E1E; padding:15px; border-radius:15px; box-shadow:0 4px 10px rgba(0,0,0,0.5); width:100%; max-width:250px; text-align:center; opacity:0; transform: translateY(15px); transition: opacity 0.3s ease, transform 0.3s ease; }
.card.visible { opacity:1; transform: translateY(0); }
.card img { width:100%; border-radius:10px; margin-bottom:12px; }
.card h3 { color:#00BFA5; font-size:1.2rem; margin-bottom:8px; }
.card p { font-size:0.9rem; color:#ccc; margin-bottom:12px; }
.card a { background:#00BFA5; color:#fff; padding:8px 18px; border-radius:8px; text-decoration:none; font-size:0.95rem; display:inline-block; transition:background 0.3s; }
.card a:hover { background:#26A69A; }

/* Highlight */
mark { background: #FFD600; color:#000; padding:0 2px; border-radius:2px; }

/* No products message */
.no-results { opacity:0; transition: opacity 0.3s ease; color:#FFD600; font-size:1.3rem; margin-top:15px; text-align:center; }
.no-results.visible { opacity:1; }

footer { margin-top:30px; padding:12px; background:#1A237E; color:#fff; font-size:0.9rem; }

/* Responsive */
@media(max-width:400px){
  header { font-size:1.6rem; padding:15px; }
  .search-box input { font-size:0.95rem; padding:8px 10px; }
  .card a { font-size:0.9rem; padding:6px 15px; }
}
</style>
</head>
<body>

<header>
  Relatify
  <span class="menu-btn" id="menuBtn">&#9776;</span>
</header>

<div class="category-menu" id="categoryMenu"></div>
<div class="menu-overlay" id="menuOverlay"></div>

<div class="search-box">
  <input type="text" id="searchInput" placeholder="Search for software...">
</div>

<main>
  <h2>ðŸ’» Softwares</h2>
  <div class="grid-container">
    <div class="grid" id="productGrid"></div>
    <div class="no-results" id="noResults">No products found</div>
  </div>
</main>

<footer>&copy; 2025 Relatify</footer>

<script>
// Redirect if not subscribed
if(sessionStorage.getItem('formSubmitted') !== 'true'){
    window.location.href = "index.html";
}

// Hamburger menu toggle with overlay
const menuBtn = document.getElementById('menuBtn');
const categoryMenu = document.getElementById('categoryMenu');
const menuOverlay = document.getElementById('menuOverlay');

function openMenu() {
    categoryMenu.style.left = '0px';
    menuOverlay.style.opacity = '1';
    menuOverlay.style.visibility = 'visible';
}

function closeMenu() {
    categoryMenu.style.left = '-250px';
    menuOverlay.style.opacity = '0';
    menuOverlay.style.visibility = 'hidden';
}

menuBtn.addEventListener('click', openMenu);
menuOverlay.addEventListener('click', closeMenu);

// Data
const grid = document.getElementById('productGrid');
const noResults = document.getElementById('noResults');
const searchInput = document.getElementById('searchInput');

let products = [];
let categories = [];

// Load products & categories
async function loadData() {
    try {
        const resProducts = await fetch('products.json');
        products = await resProducts.json();

        const resCategories = await fetch('category.json');
        categories = await resCategories.json();

        renderCategoryMenu();
        renderProducts(products);
    } catch(err) {
        console.error('Failed to load data', err);
        noResults.textContent = "Failed to load products";
        noResults.classList.add('visible');
    }
}

// Render category menu buttons
function renderCategoryMenu() {
    categories.forEach(cat => {
        const btn = document.createElement('button');
        btn.textContent = cat.name;
        btn.dataset.id = cat.id;
        btn.addEventListener('click', () => {
            renderProductsByCategory(cat.id);
            closeMenu();
        });
        categoryMenu.appendChild(btn);
    });
}

// Highlight search
function highlight(text, query) {
    if(!query) return text;
    const regex = new RegExp(`(${query.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&')})`, 'gi');
    return text.replace(regex, '<mark>$1</mark>');
}

// Render products
function renderProducts(list, query='') {
    grid.innerHTML = '';
    let filtered = list;
    if(query) {
        filtered = list.filter(p => p.name.toLowerCase().includes(query.toLowerCase()) || p.description.toLowerCase().includes(query.toLowerCase()));
    }
    noResults.classList.toggle('visible', filtered.length === 0);
    filtered.forEach(p => {
        const card = document.createElement('div');
        card.className = 'card visible';
        card.innerHTML = `
            <img src="${p.img}" alt="${p.name}">
            <h3>${highlight(p.name, query)}</h3>
            <p>${highlight(p.description, query)}</p>
            <a href="${p.link}" target="_blank" rel="noopener noreferrer">Get Here</a>
        `;
        grid.appendChild(card);
    });
}

// Render products by category
function renderProductsByCategory(catId) {
    const cat = categories.find(c => c.id === catId);
    if(!cat) return;
    const filtered = products.filter(p => cat.products.includes(p.name));
    renderProducts(filtered);
}

// Search functionality
searchInput.addEventListener('input', () => renderProducts(products, searchInput.value));

// Initialize
loadData();
</script>

</body>
</html>
