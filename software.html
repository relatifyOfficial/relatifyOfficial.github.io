<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Relatify - Software</title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+Bhai+2&display=swap" rel="stylesheet">
<style>
body {
    font-family: 'Baloo Bhai 2', Comic Sans MS, sans-serif;
    background:#121212;
    color:#fff;
    margin:0;
    padding:0;
}
header {
    position: sticky;
    top:0;
    background: #1A237E;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 20px;
    z-index: 1000;
}
.menu-toggle {
    font-size: 2rem;
    color: #00BFA5;
    background: none;
    border: none;
    cursor: pointer;
}
.search-box {
    flex: 1;
    display: flex;
    justify-content: flex-end;
}
.search-box input {
    width: 250px;
    max-width: 80vw;
    padding: 8px 12px;
    border-radius: 10px;
    border: 2px solid #00BFA5;
    outline: none;
    font-size: 1rem;
    box-shadow: 0 0 10px #00BFA5;
    transition: 0.3s;
}
.search-box input:focus {
    box-shadow: 0 0 20px #00FFCC;
    border-color: #00FFCC;
}
main {
    padding:15px;
    display:flex;
    flex-direction:column;
    align-items:center;
}
h2 { color:#FFD600; font-size:1.8rem; margin-bottom:15px; }
.product-count {
    color: #FFD600;
    margin-bottom:10px;
    font-size:1.1rem;
}
.menu-sidebar {
    position: fixed;
    top: 0;
    left: -220px;
    width: 200px;
    height: 100%;
    background:#1E1E1E;
    padding: 50px 10px;
    transition: 0.3s;
    z-index: 999;
    display: flex;
    flex-direction: column;
    gap:10px;
}
.menu-sidebar button {
    background:#00BFA5;
    color:#fff;
    border:none;
    padding:10px;
    border-radius:8px;
    cursor:pointer;
    text-align:left;
    font-size:1rem;
    transition: background 0.3s;
}
.menu-sidebar button:hover { background:#26A69A; }
.menu-sidebar.show { left:0; }
.grid-container {
    width:100%;
    max-width:1200px;
    margin-top:20px;
}
.grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap:20px;
    justify-items:center;
}
@media(max-width:900px){ .grid { grid-template-columns: repeat(3,1fr); gap:15px; } }
@media(max-width:600px){ .grid { grid-template-columns: repeat(3,1fr); gap:10px; } }
.card {
    background:#1E1E1E;
    padding:15px;
    border-radius:15px;
    box-shadow:0 4px 10px rgba(0,0,0,0.5);
    width:100%;
    max-width:250px;
    text-align:center;
    opacity:0;
    transform: translateY(15px);
    transition: opacity 0.3s ease, transform 0.3s ease;
}
.card.visible { opacity:1; transform: translateY(0); }
.card img { width:100%; border-radius:10px; margin-bottom:12px; }
.card h3 { color:#00BFA5; font-size:1.2rem; margin-bottom:8px; }
.card p { font-size:0.9rem; color:#ccc; margin-bottom:12px; }
.card a { background:#00BFA5; color:#fff; padding:8px 18px; border-radius:8px; text-decoration:none; font-size:0.95rem; display:inline-block; transition:background 0.3s; }
.card a:hover { background:#26A69A; }
.no-results { opacity:0; transition: opacity 0.3s ease; color:#FFD600; font-size:1.3rem; margin-top:15px; text-align:center; }
.no-results.visible { opacity:1; }
footer { margin-top:30px; padding:12px; background:#1A237E; color:#fff; font-size:0.9rem; }
</style>
</head>
<body>

<header>
    <button class="menu-toggle">&#9776;</button>
    <div class="search-box">
        <input type="text" id="searchInput" placeholder="Search for software...">
    </div>
</header>

<div class="menu-sidebar" id="menuSidebar"></div>

<main>
  <h2>ðŸ’» Softwares</h2>
  <div class="product-count" id="matchCount"></div>
  <div class="grid-container">
      <div class="grid" id="productGrid"></div>
      <div class="no-results" id="noResults">No products found</div>
  </div>
</main>

<footer>&copy; 2025 Relatify</footer>

<script>
if(sessionStorage.getItem('formSubmitted') !== 'true'){
    window.location.href = "index.html";
}

const grid = document.getElementById('productGrid');
const noResults = document.getElementById('noResults');
const matchCount = document.getElementById('matchCount');
const searchInput = document.getElementById('searchInput');
const menuSidebar = document.getElementById('menuSidebar');
const menuToggle = document.querySelector('.menu-toggle');

let products = [];
let categories = [];

// Load data
async function loadData() {
    try {
        const resProducts = await fetch('products.json');
        products = await resProducts.json();
        const resCategories = await fetch('category.json');
        categories = await resCategories.json();
        renderMenu();
        renderProducts(products);
    } catch(e){ console.error(e); noResults.textContent="Failed to load products"; noResults.classList.add('visible'); }
}

// Render menu buttons
function renderMenu(){
    categories.forEach(cat=>{
        const btn = document.createElement('button');
        btn.textContent = cat.name;
        btn.addEventListener('click', ()=>{
            renderProducts(products.filter(p=>cat.products.includes(p.name)));
            menuSidebar.classList.remove('show');
        });
        menuSidebar.appendChild(btn);
    });
}

// Toggle menu
menuToggle.addEventListener('click', ()=>menuSidebar.classList.toggle('show'));

// Highlight search
function highlight(text, query){
    if(!query) return text;
    const regex = new RegExp(`(${query.replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&')})`,'gi');
    return text.replace(regex,'<mark>$1</mark>');
}

// Render products
function renderProducts(list, query=''){
    if(query) list = list.filter(p=>p.name.toLowerCase().includes(query.toLowerCase())||p.description.toLowerCase().includes(query.toLowerCase()));
    grid.innerHTML='';
    if(list.length===0){ noResults.classList.add('visible'); matchCount.textContent='0 products found'; return; }
    noResults.classList.remove('visible');
    matchCount.textContent=`${list.length} product${list.length>1?'s':''} found`;
    list.forEach(p=>{
        const card=document.createElement('div');
        card.className='card';
        card.innerHTML=`<img src="${p.img}" alt="${p.name}"><h3>${highlight(p.name, query)}</h3><p>${highlight(p.description, query)}</p><a href="${p.link}" target="_blank" rel="noopener noreferrer">Get Here</a>`;
        grid.appendChild(card);
        setTimeout(()=>card.classList.add('visible'),10);
    });
}

// Search input
searchInput.addEventListener('input',()=>renderProducts(products, searchInput.value));

loadData();
</script>

</body>
</html>
