<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Relatify - Software</title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+Bhai+2&display=swap" rel="stylesheet">
<style>
body { font-family: 'Baloo Bhai 2', Comic Sans MS, sans-serif; background:#121212; color:#fff; margin:0; padding:0; }
header { background:#1A237E; padding:15px; font-size:2rem; font-weight:bold; color:#fff; position: sticky; top: 0; z-index: 1000; display:flex; align-items:center; justify-content:space-between; }
header h1 { margin:0; font-size:1.8rem; }
.menu-btn { font-size:2rem; cursor:pointer; user-select:none; }
.search-box { position: sticky; top:60px; display:flex; justify-content:flex-end; padding:10px; background:#121212; z-index:999; }
.search-box input { padding:10px 12px; border-radius:10px; border:2px solid #00BFA5; box-shadow:0 0 8px #00BFA5; width:300px; max-width:90%; outline:none; font-size:1rem; }
.autocomplete-items { position:absolute; background:#1E1E1E; border:1px solid #00BFA5; border-top:none; z-index:999; max-height:150px; overflow-y:auto; width:300px; }
.autocomplete-items div { padding:8px; cursor:pointer; }
.autocomplete-items div:hover { background:#00BFA5; color:#000; }

.side-menu { position:fixed; left:-250px; top:0; width:250px; height:100%; background:#1A237E; overflow-y:auto; transition:0.3s; z-index:1000; padding-top:60px; }
.side-menu button { width:90%; margin:10px auto; padding:10px; border:none; border-radius:8px; cursor:pointer; background:#00BFA5; color:#fff; font-size:1rem; display:block; transition:0.3s; }
.side-menu button:hover { background:#26A69A; }

main { padding:20px; display:flex; flex-direction:column; align-items:center; }
h2 { color:#FFD600; font-size:1.8rem; margin-bottom:10px; }
.match-count { margin:10px 0; color:#FFD600; font-size:1.1rem; }

.grid-container { width:100%; max-width:1200px; }
.grid { display:grid; grid-template-columns: repeat(3, 1fr); gap:25px; justify-items:center; }
@media(max-width:900px){ .grid { grid-template-columns: repeat(3,1fr); gap:20px; } }
@media(max-width:600px){ .grid { grid-template-columns: repeat(3,1fr); gap:15px; } }

.card { background:#1E1E1E; padding:20px; border-radius:20px; width:100%; max-width:260px; text-align:center; opacity:0; transform:translateY(15px); transition:opacity 0.3s ease, transform 0.3s ease, box-shadow 0.3s; cursor:pointer; }
.card.visible { opacity:1; transform:translateY(0); }
.card:hover { box-shadow:0 8px 20px rgba(0,191,165,0.6); transform:translateY(-5px); }
.card img { width:100%; border-radius:12px; margin-bottom:12px; }
.card h3 { color:#00BFA5; font-size:1.2rem; margin-bottom:8px; }
.card p { font-size:0.9rem; color:#ccc; margin-bottom:12px; }
.card a { background:#00BFA5; color:#fff; padding:8px 18px; border-radius:8px; text-decoration:none; font-size:0.95rem; display:inline-block; transition:background 0.3s; }
.card a:hover { background:#26A69A; }

.no-results { opacity:0; transition:opacity 0.3s ease; color:#FFD600; font-size:1.3rem; margin-top:15px; text-align:center; }
.no-results.visible { opacity:1; }

footer { margin-top:30px; padding:12px; background:#1A237E; color:#fff; font-size:0.9rem; }

.side-menu::-webkit-scrollbar { width:6px; }
.side-menu::-webkit-scrollbar-thumb { background:#00BFA5; border-radius:3px; }
</style>
</head>
<body>

<header>
  <div class="menu-btn" id="menuBtn">&#9776;</div>
  <h1>Relatify</h1>
</header>

<div class="search-box">
  <input type="text" id="searchInput" placeholder="Search for software...">
  <div id="autocomplete-list" class="autocomplete-items"></div>
</div>

<div class="side-menu" id="sideMenu"></div>

<main>
  <h2>ðŸ’» Softwares</h2>
  <div class="match-count" id="matchCount"></div>
  <div class="grid-container">
    <div class="grid" id="productGrid"></div>
    <div class="no-results" id="noResults">No products found</div>
  </div>
</main>

<footer>&copy; 2025 Relatify</footer>

<script>
if(sessionStorage.getItem('formSubmitted')!=='true'){ window.location.href="index.html"; }

const grid=document.getElementById('productGrid');
const noResults=document.getElementById('noResults');
const matchCount=document.getElementById('matchCount');
const searchInput=document.getElementById('searchInput');
const sideMenu=document.getElementById('sideMenu');
const autocompleteList=document.getElementById('autocomplete-list');
let products=[], categories=[], selectedCategory=null, menuOpen=false;

// Load products and categories
async function loadData(){
  try{
    const resProducts=await fetch('products.json'); products=await resProducts.json();
    const resCategories=await fetch('category.json'); categories=await resCategories.json();
    renderSideMenu(); renderProducts(products);
  }catch(err){ console.error(err); noResults.textContent="Failed to load products"; noResults.classList.add('visible'); }
}

// Side menu
function renderSideMenu(){
  categories.forEach(cat=>{
    const btn=document.createElement('button');
    btn.textContent=cat.name;
    btn.addEventListener('click', ()=>{
      selectedCategory=cat.id;
      renderProductsByCategory(selectedCategory);
      toggleMenu();
    });
    sideMenu.appendChild(btn);
  });
}

document.getElementById('menuBtn').addEventListener('click', toggleMenu);
function toggleMenu(){
  menuOpen=!menuOpen;
  sideMenu.style.left=menuOpen?'0':'-250px';
  if(menuOpen){ grid.innerHTML=''; matchCount.textContent=''; }
  else{ selectedCategory=null; renderProducts(products); }
}

// Render all products
function renderProducts(list){
  grid.innerHTML='';
  list.forEach(p=>{
    const card=document.createElement('div'); card.className='card';
    card.innerHTML=`<img src="${p.img}" alt="${p.name}"><h3>${p.name}</h3><p>${p.description}</p><a href="${p.link}" target="_blank" rel="noopener noreferrer">Get Here</a>`;
    grid.appendChild(card); setTimeout(()=>card.classList.add('visible'),10);
  });
  matchCount.textContent=list.length>0?`${list.length} product${list.length>1?'s':''} found`:'';
  noResults.classList.toggle('visible', list.length===0);
}

// Render by category
function renderProductsByCategory(catId){
  const cat=categories.find(c=>c.id===catId);
  if(!cat) return;
  const filtered=products.filter(p=>cat.products.includes(p.name));
  renderProducts(filtered);
}

// Search with autocomplete
searchInput.addEventListener('input', ()=>{
  const query=searchInput.value.toLowerCase();
  const filtered=products.filter(p=>p.name.toLowerCase().includes(query));
  renderProducts(filtered);
  autocompleteList.innerHTML='';
  if(query.length>0){
    filtered.slice(0,5).forEach(p=>{
      const div=document.createElement('div'); div.textContent=p.name;
      div.addEventListener('click', ()=>{ searchInput.value=p.name; renderProducts([p]); autocompleteList.innerHTML=''; });
      autocompleteList.appendChild(div);
    });
  }
});

document.addEventListener('click', e=>{ if(e.target!==searchInput) autocompleteList.innerHTML=''; });

loadData();
</script>
</body>
</html>
